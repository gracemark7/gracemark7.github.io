<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React-简书 | Grace&#39;s Blog</title>
    <meta name="description" content="信仰、工作、生活">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.b2fa97c3.css" as="style"><link rel="preload" href="/assets/js/app.25f0ea44.js" as="script"><link rel="preload" href="/assets/js/20.41efddb4.js" as="script"><link rel="prefetch" href="/assets/js/10.d5d2af0e.js"><link rel="prefetch" href="/assets/js/11.ba12862c.js"><link rel="prefetch" href="/assets/js/12.eeb86992.js"><link rel="prefetch" href="/assets/js/13.4882fd4d.js"><link rel="prefetch" href="/assets/js/14.00078334.js"><link rel="prefetch" href="/assets/js/15.58a01617.js"><link rel="prefetch" href="/assets/js/16.bc7aa871.js"><link rel="prefetch" href="/assets/js/17.18777b3f.js"><link rel="prefetch" href="/assets/js/18.e47c9be0.js"><link rel="prefetch" href="/assets/js/19.6b63b600.js"><link rel="prefetch" href="/assets/js/21.28410378.js"><link rel="prefetch" href="/assets/js/22.8625582d.js"><link rel="prefetch" href="/assets/js/23.6e5545be.js"><link rel="prefetch" href="/assets/js/24.81855949.js"><link rel="prefetch" href="/assets/js/25.d7829336.js"><link rel="prefetch" href="/assets/js/26.fbda8f6e.js"><link rel="prefetch" href="/assets/js/27.f897798b.js"><link rel="prefetch" href="/assets/js/28.a44f0ce5.js"><link rel="prefetch" href="/assets/js/29.47707aff.js"><link rel="prefetch" href="/assets/js/3.bf92a271.js"><link rel="prefetch" href="/assets/js/4.a187db1a.js"><link rel="prefetch" href="/assets/js/5.35112557.js"><link rel="prefetch" href="/assets/js/6.0272308b.js"><link rel="prefetch" href="/assets/js/7.71191f64.js"><link rel="prefetch" href="/assets/js/8.8d6740dd.js"><link rel="prefetch" href="/assets/js/9.69e4dc6f.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.32940b96.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b2fa97c3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><div><header id="navbarWrapper" class="navbar"><div class="sidebar-button"><i class="iconfont reco-menu"></i></div> <a href="/" class="home-link router-link-active"><img src="/images/chizhiyiheng.png" alt="Grace's Blog" class="logo"> <span class="site-name">Grace's Blog</span></a> <div class="links" style="max-width:nullpx;"><div class="side-search-wrapper"><div class="search-box" data-v-1b2e3b29><input aria-label="Search" autocomplete="off" spellcheck="false" value="" data-v-1b2e3b29> <i class="iconfont reco-search" data-v-1b2e3b29></i> <!----></div></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont undefined"></i>
  首页
</a></div><div class="nav-item"><a href="/markTime/" class="nav-link"><i class="iconfont undefined"></i>
  生活
</a></div><div class="nav-item"><a href="/techNology/" class="nav-link router-link-active"><i class="iconfont undefined"></i>
  工作
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont undefined"></i>
  归档
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Life.html" class="nav-link"><i class="iconfont undefined"></i>
  生活
</a></li><li class="dropdown-item"><!----> <a href="/categories/Faith.html" class="nav-link"><i class="iconfont undefined"></i>
  信仰
</a></li><li class="dropdown-item"><!----> <a href="/categories/Work.html" class="nav-link"><i class="iconfont undefined"></i>
  工作
</a></li></ul></div></div><div class="nav-item"><a href="/tags/" class="nav-link"><i class="iconfont undefined"></i>
  标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://shanyue.tech/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  山月行
  </a></li><li class="dropdown-item"><!----> <a href="https://q.shanyue.tech/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  大厂面试每日一题
  </a></li><li class="dropdown-item"><!----> <a href="https://liuxiangyang.space/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  刘向洋
  </a></li><li class="dropdown-item"><!----> <a href="http://blog.devtang.com/2020/01/01/2019-summary/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  唐巧
  </a></li><li class="dropdown-item"><!----> <a href="https://biaochenxuying.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  夜尽天明
  </a></li></ul></div></div><div class="nav-item"><a href="/myNews/" class="nav-link"><i class="iconfont undefined"></i>
  关于我
</a></div><div class="nav-item"><a href="https://github.com/xilewangzi" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  Github
  </a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><div class="side-search-wrapper"><div class="search-box" data-v-1b2e3b29><input aria-label="Search" autocomplete="off" spellcheck="false" value="" data-v-1b2e3b29> <i class="iconfont reco-search" data-v-1b2e3b29></i> <!----></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont undefined"></i>
  首页
</a></div><div class="nav-item"><a href="/markTime/" class="nav-link"><i class="iconfont undefined"></i>
  生活
</a></div><div class="nav-item"><a href="/techNology/" class="nav-link router-link-active"><i class="iconfont undefined"></i>
  工作
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont undefined"></i>
  归档
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Life.html" class="nav-link"><i class="iconfont undefined"></i>
  生活
</a></li><li class="dropdown-item"><!----> <a href="/categories/Faith.html" class="nav-link"><i class="iconfont undefined"></i>
  信仰
</a></li><li class="dropdown-item"><!----> <a href="/categories/Work.html" class="nav-link"><i class="iconfont undefined"></i>
  工作
</a></li></ul></div></div><div class="nav-item"><a href="/tags/" class="nav-link"><i class="iconfont undefined"></i>
  标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://shanyue.tech/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  山月行
  </a></li><li class="dropdown-item"><!----> <a href="https://q.shanyue.tech/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  大厂面试每日一题
  </a></li><li class="dropdown-item"><!----> <a href="https://liuxiangyang.space/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  刘向洋
  </a></li><li class="dropdown-item"><!----> <a href="http://blog.devtang.com/2020/01/01/2019-summary/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  唐巧
  </a></li><li class="dropdown-item"><!----> <a href="https://biaochenxuying.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  夜尽天明
  </a></li></ul></div></div><div class="nav-item"><a href="/myNews/" class="nav-link"><i class="iconfont undefined"></i>
  关于我
</a></div><div class="nav-item"><a href="https://github.com/xilewangzi" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  Github
  </a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>React-简书</span> <!----></p> <ul class="sidebar-group-items"></ul></div></li></ul> </div> <div class="page reco-hide" data-v-23c3ef88> <div class="page-title" data-v-23c3ef88><h1 data-v-23c3ef88>React-简书</h1> <hr data-v-23c3ef88> <div data-v-48defabe data-v-23c3ef88><i class="iconfont reco-account" data-v-48defabe><span data-v-48defabe>grace</span></i> <i class="iconfont reco-date" data-v-48defabe><span data-v-48defabe>2021/7/19</span></i> <!----> <i class="iconfont reco-tag tags" data-v-48defabe><span class="tag-item" data-v-48defabe>
      React
    </span></i></div></div> <div class="content" data-v-23c3ef88><p>React ： A JS library for building user interfaces</p> <p>React 中的组件</p> <h4 id="三、todolist-demo-基础"><a href="#三、todolist-demo-基础" class="header-anchor">#</a> 三、Todolist-Demo 基础</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>//immutable

state 不允许我们做任何改变
 deleteTodoItem (index){
    const list = [...this.state.todoItems];
    list.splice(index,1)
    this.setState({
      todoItems:list
    })
  }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>2、JSX</p> <p>写注释</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
//这样写注释

{/*注释...*/}
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>3、不转译：</p> <div class="language-\ line-numbers-mode"><pre class="language-text"><code>&lt;li key={index}  onClick={this.deleteTodoItem.bind(this,index)}
                  dangerouslySetInnerHTML={{ __html:item }}
                &gt;
&lt;/li&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>4、组件拆分、传值
组件-树形结构</p> <p>父组件通过属性向子组件传值，子组件通过 this.props.xxx 接受值</p> <p>既可以传递数据、也可以传递方法</p> <p>注意：子调用父组件方法，父组件传递函数 this 指向绑定</p> <p>5、优化</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>this.props.deleteTodoItemBtn(this.props.index)


//解构赋值
    const { deleteTodoItemBtn,index } = this.props
    deleteTodoItemBtn(index)

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>this 指向的绑定，组件初始化的时候，this 指向改好。提升页面性能</p> <p>精简 jsx 内逻辑，单独封装函数，引入</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>//触发input框
 this.setState({
      todoItems:list
    })


    this.setState( () =&gt;{
      return {
        inputValue: e.target.value
      }
    })


const value = e.target.value;
    this.setState(() =&gt; ({
      inputValue:value
    }))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>//添加
 this.setState({
      todoItems:[...this.state.todoItems,this.state.inputValue],
      inputValue:&quot;&quot;
    })
    //Es6函数语法
    this.setState((prevState) =&gt; ({
      todoItems:[...prevState.todoItems,prevState.inputValue],
      inputValue:&quot;&quot;
    }))

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>//删除

优化前：
const list = [...this.state.todoItems];
    list.splice(index,1)
    this.setState({
      todoItems:list
    })

    优化后：
    this.setState((prevState) =&gt; {
      const todoItems = [...prevState.todoItems];
      todoItems.splice(index,1)
      return { todoItems }
    })
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>思考：</p> <p>命令式编程</p> <p>声明式编程、组件化</p> <p>单向数据流：父组件单向传给子组件，但不能改变</p> <p>视图层框架（数据传值交给 redux、mbox 框架）</p> <p>函数式编程（自动化测试到来便捷）</p> <h4 id="四、react-高级内容"><a href="#四、react-高级内容" class="header-anchor">#</a> 四、React 高级内容</h4> <p>1、开发者工具：chorm 扩展程序</p> <p>React Developer Tools</p> <p>PropTypes 与 DefaultProps 的应用：</p> <p>PropTypes：接受外部传入的 prop 进行校验</p> <p>DefaultProps：父组件没有向子组件传递数据，定义默认值</p> <p>2、props，state 与 render 函数的关系</p> <p>当组件的 state 或者 props 发生改变的时候，render 函数就会重新执行</p> <p>当父组件的 render 函数被运行时，它的子组件的 render 都被重新运行一次</p> <p>3、React 中的虚拟 DOM</p> <p>虚拟 DOM 就是一个 JS 对象</p> <p>4、深入了解虚拟 DOM</p> <p>JSX -&gt; creatElement -&gt; 虚拟 DOM(js 对象) -&gt; 真实 DOM</p> <p>虚拟 DOM 优点：</p> <p>性能提升、跨段应用得以实现（RN）、</p> <p>5、虚拟 DOM 中的 Diff 算法</p> <p>setState 异步函数</p> <p>setState 只在合成事件和钩子函数中是“异步”的，在原生事件和 setTimeout 中都是同步的。</p> <p>setState 的“异步”并不是说内部由异步代码实现，其实本身执行的过程和代码都是同步的，只是合成事件和钩子函数的调用顺序在更新之前，导致在合成事件和钩子函数中没法立马拿到更新后的值，形式了所谓的“异步”，当然可以通过第二个参数 setState(partialState, callback) 中的 callback 拿到更新后的结果。</p> <p>setState 的批量更新优化也是建立在“异步”（合成事件、钩子函数）之上的，在原生事件和 setTimeout 中不会批量更新，在“异步”中如果对同一个值进行多次 setState ， setState 的批量更新策略会对其进行覆盖，取最后一次的执行，如果是同时 setState 多个不同的值，在更新时会对其进行合并批量更新。</p> <p>diff 同层对比</p> <p>6、React 中 ref 的使用</p> <p>ref 帮助直接获取 DOM 元素使用</p> <p>结合 setState 使用时，获取 DOM 不及时，由于 setState 在这里是异步。可以放到 setState 回调中执行 DOM 操作</p> <p>ref 作用于 React 内置的 Html 组件，得到真实的 DOM 对象</p> <p>ref 作用于类组件，得到类的实例对象</p> <p>ref 不能作用于函数组件上（即引用组件是函数组件的话，给函数组件使用 ref 会报错）</p> <p>ref 属性推荐传递对象或函数</p> <p>对象  (通过  React.createRef()  创建或手动创建  { current: null })</p> <p>7、生命周期：函数在某一时刻组件自动调用执行的函数</p> <p>挂载</p> <p>render</p> <p>componentDidMount</p> <p>更新</p> <p>shouldComponentUpdate</p> <p>render</p> <p>componentDidUpdate</p> <p>卸载</p> <p>React 生命周期函数的使用场景：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>//当父组件render执行，子组件处理不需要执行
shouldComponentUpdate(nextProps,nextState){
    if(nextProps.content !== this.props.content){
      return true
    }else{
      return false
    }
  }

  //ajax请求

componentDidMount

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="五、redux"><a href="#五、redux" class="header-anchor">#</a> 五、Redux</h4> <p>看成图书馆</p> <p>Store--图书管理员</p> <p>React Components--借阅的学生</p> <p>Reducers--借阅记录册（//reducer  可以接受 state，但不能修改 state）</p> <p>Action Creaters--我要借什么书</p> <p>基本原则：</p> <p>store 必须唯一</p> <p>只有 store 能够改变自己的数据内容，reducer  可以接受 state，但不能修改 state</p> <p>Reducer 必须是个纯函数（给定固定的输入，就一定会有固定的输出，而且不会有任何副作用）</p> <p>副作用：对参数的修改</p> <p>核心 API:</p> <p>createStore</p> <p>store.dispatch</p> <p>store.getState</p> <p>store.subscibe</p> <h4 id="、六、redux-进阶"><a href="#、六、redux-进阶" class="header-anchor">#</a> 、六、Redux 进阶</h4> <p>UI 组件和容器组件:组件拆分</p> <p>UI 组件:负责页面渲染</p> <p>容器组件：负责业务逻辑</p></div> <!----> <!----> <!----> <div class="page-edit" data-v-23c3ef88><!----> <div class="last-updated" data-v-23c3ef88><span class="prefix" data-v-23c3ef88>Last Updated: </span> <span class="time" data-v-23c3ef88>4/17/2022, 5:16:59 PM</span></div></div> <!----> </div> <div class="valine-wrapper" data-v-1fab1fd0><div id="valine" data-v-1fab1fd0></div></div> <!----> <!----> <div class="back-to-ceiling" style="right:1rem;bottom:3rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;background-color:rgba(231, 234, 241,.5);display:none;" data-v-41016a8b data-v-41016a8b><i class="iconfont reco-up" data-v-41016a8b></i></div></div></div></div>
    <script src="/assets/js/app.25f0ea44.js" defer></script><script src="/assets/js/20.41efddb4.js" defer></script>
  </body>
</html>
